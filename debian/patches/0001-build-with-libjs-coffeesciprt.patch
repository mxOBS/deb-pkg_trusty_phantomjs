From: TANIGUCHI Takaki <takaki@asis.media-as.org>
Date: Sat, 29 Oct 2011 18:26:43 +0900
Subject: build with libjs-coffeesciprt

---
 python/pyphantomjs/csconverter.py |    2 +-
 python/pyphantomjs/resources.qrc  |    1 -
 src/csconverter.cpp               |    2 +-
 src/phantomjs.qrc                 |    1 -
 4 files changed, 2 insertions(+), 4 deletions(-)

Index: phantomjs/src/phantomjs.qrc
===================================================================
--- phantomjs.orig/src/phantomjs.qrc	2012-03-31 20:42:59.000000000 +0900
+++ phantomjs/src/phantomjs.qrc	2012-03-31 20:52:16.861058520 +0900
@@ -2,7 +2,6 @@
     <qresource prefix="/">
         <file>remote_debugger_harness.html</file>
         <file>phantomjs-icon.png</file>
-        <file>coffee-script.js</file>
         <file>usage.txt</file>
         <file>bootstrap.js</file>
         <file>configurator.js</file>
Index: phantomjs/src/csconverter.cpp
===================================================================
--- phantomjs.orig/src/csconverter.cpp	2012-03-31 20:42:59.000000000 +0900
+++ phantomjs/src/csconverter.cpp	2012-03-31 20:53:29.797415091 +0900
@@ -49,7 +49,7 @@
     : QObject(QCoreApplication::instance())
 {
     m_webPage.mainFrame()->evaluateJavaScript(
-        Utils::readResourceFileUtf8(":/coffee-script.js"),
+        Utils::readResourceFileUtf8("/usr/share/javascript/coffeescript/coffee-script.js"),
         QString("phantomjs://coffee-script.js")
     );
     m_webPage.mainFrame()->addToJavaScriptWindowObject("converter", this);
